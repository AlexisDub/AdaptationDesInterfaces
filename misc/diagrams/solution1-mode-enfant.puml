@startuml Solution 1 - Mode Enfant (Compact)
title Solution 1 - Mode Enfant (Chef Léo)

participant "Enfant" as User
participant "App" as FE
participant "DishAdapter" as DA
participant "restaurant-data.ts" as Data
participant "Menu Service\n:3000" as Menu

note over User,Data: === FRONTEND ===
note over Menu: === BACKEND ===

== Activation ==

User -> FE: Clique "Mode Enfant"
FE -> Data: loadChildModeConfig() + loadChildRewards()
Data --> FE: Config + Rewards
FE -> FE: initChildState()
FE --> User: "Bonjour petit chef !"

== Chargement Plats ==

FE -> Menu: **GET /menus**
Menu --> FE: MenuItem[]

FE -> DA: enrichAndFilter(filterKidFriendly)
DA -> Data: loadEnrichmentData()
Data --> DA: EnrichmentMap
DA -> DA: filter(kidFriendly)
DA --> FE: Dish[] enfants
FE --> User: Affiche plats enfants

== Récompenses ==

loop Commande entrée/plat/dessert
  User -> FE: Commande plat
  FE -> FE: Accumule étoiles
  FE --> User: Message Chef Léo
  break Après dessert
    FE --> User: "Bravo champion !"
  end
end

alt Étoiles suffisantes
  FE --> User: "Choisis des récompenses !"
  User -> FE: Sélectionne une/des récompenses
  FE --> User: Voucher visuel
  note left of User: "Montre au serveur !" : Livraison manuelle
else Pas ou plus assez
  FE --> User: "Bon appétit !"
end

@enduml
