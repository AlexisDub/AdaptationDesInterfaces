# ğŸ“ Architecture Visuelle de l'IntÃ©gration Backend

## Vue d'ensemble du systÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React + TypeScript)                    â”‚
â”‚                         Port: 3003 (npm run dev)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚                     â”‚
                                     â–¼                     â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  MODE MOCK   â”‚      â”‚ MODE BACKEND â”‚
                            â”‚  (DÃ©faut)    â”‚      â”‚  (Optionnel) â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚                     â”‚
                                     â”‚                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                                       â”‚
                    â–¼                                                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   dishes.ts  â”‚                                    â”‚ backendAPI.ts    â”‚
            â”‚  (DonnÃ©es    â”‚                                    â”‚ (3 Microservices)â”‚
            â”‚   locales)   â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
                    â”‚                                                     â”‚
                    â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                      â”‚              â”‚              â”‚
                    â”‚                                      â–¼              â–¼              â–¼
                    â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚   Menu     â”‚ â”‚  Dining    â”‚ â”‚  Kitchen   â”‚
                    â”‚                             â”‚  Service   â”‚ â”‚  Service   â”‚ â”‚  Service   â”‚
                    â”‚                             â”‚  :3001     â”‚ â”‚  :3002     â”‚ â”‚  :3004     â”‚
                    â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                      â”‚              â”‚              â”‚
                    â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                                     â”‚
                    â”‚                                                     â–¼
                    â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                          â”‚  dishMapper.ts   â”‚
                    â”‚                                          â”‚  (Transformation)â”‚
                    â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                                     â”‚
                    â”‚                                                     â–¼
                    â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                          â”‚dishEnrichment.ts â”‚
                    â”‚                                          â”‚ (Enrichissement) â”‚
                    â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚  dishService.ts  â”‚
                                     â”‚ (Service UnifiÃ©) â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                          â”‚                          â”‚
                     â–¼                          â–¼                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Table Tactileâ”‚          â”‚   Tablette   â”‚          â”‚  Smartphone  â”‚
            â”‚  (4 joueurs) â”‚          â”‚ (Parent/Kid) â”‚          â”‚ (Parent/Kid) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flux de donnÃ©es dÃ©taillÃ©

### Mode MOCK (DonnÃ©es locales)

```
1. L'utilisateur ouvre l'app
   â”‚
   â–¼
2. dishService.loadDishes() vÃ©rifie BACKEND_CONFIG.USE_MOCK_DATA
   â”‚
   â–¼
3. USE_MOCK_DATA = true â†’ Charge depuis dishes.ts
   â”‚
   â–¼
4. Retourne les plats directement (dÃ©jÃ  complets)
   â”‚
   â–¼
5. Les composants affichent les plats
```

### Mode BACKEND (Microservices)

```
1. L'utilisateur ouvre l'app
   â”‚
   â–¼
2. dishService.loadDishes() vÃ©rifie BACKEND_CONFIG.USE_MOCK_DATA
   â”‚
   â–¼
3. USE_MOCK_DATA = false â†’ Appelle MenuServiceAPI.getAllMenuItems()
   â”‚
   â–¼
4. GET http://localhost:3001/menus
   â”‚
   â–¼
5. ReÃ§oit des MenuItem[] (INCOMPLETS)
   {
     _id: "...",
     shortName: "burger-classique",
     fullName: "Burger Classique",
     price: 12.50,
     category: "MAIN",
     image: "https://..."
   }
   â”‚
   â–¼
6. dishMapper.mapBackendItemsToDishes(items)
   â”‚
   â–¼
7. Pour chaque item:
   a) getEnrichmentData(shortName) â†’ cherche dans dishEnrichment.ts
   b) Combine backend + enrichissement local
   c) Convertit les types (MAIN â†’ "plat")
   d) Ajoute propriÃ©tÃ©s par dÃ©faut (popularity, isQuick, etc.)
   â”‚
   â–¼
8. Retourne des Dish[] (COMPLETS)
   {
     id: "...",
     name: "Burger Classique",
     description: "Burger 180g avec cheddar...",
     price: 12.50,
     category: "plat",
     imageUrl: "https://...",
     ingredients: ["BÅ“uf", "Pain brioche", ...],
     prepTime: 15,
     popularity: 3,
     isVegetarian: false,
     ...
   }
   â”‚
   â–¼
9. Les composants affichent les plats (transparence totale !)
```

## Cycle de commande (Table Tactile + Backend)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TABLE TACTILE INTERFACE                          â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Joueur 1   â”‚  â”‚ Joueur 2   â”‚  â”‚ Joueur 3   â”‚  â”‚ Joueur 4   â”‚       â”‚
â”‚  â”‚ (180Â°)     â”‚  â”‚ (180Â°)     â”‚  â”‚            â”‚  â”‚            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                          â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                    â”‚  PANIER COMMUN     â”‚                               â”‚
â”‚                    â”‚  (Split L/R)       â”‚                               â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                           â”‚
                  â–¼                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Ã‰tat Local       â”‚        â”‚ Backend (sync)   â”‚
        â”‚ (React State)    â”‚        â”‚ (optionnel)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                           â”‚
                  â”‚                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚                           â”‚            â”‚
    â–¼                           â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Panier   â”‚            â”‚ Panier   â”‚   â”‚ POST     â”‚
â”‚Personnel â”‚            â”‚ PartagÃ©  â”‚   â”‚/tableOrdersâ”‚
â”‚(4 carts) â”‚            â”‚(1 cart)  â”‚   â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                           â”‚            â”‚
    â”‚                           â”‚            â–¼
    â”‚                           â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                           â”‚   â”‚ TableOrder       â”‚
    â”‚                           â”‚   â”‚ - lines[]        â”‚
    â”‚                           â”‚   â”‚ - preparations[] â”‚
    â”‚                           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                           â”‚
    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Paiement â”‚            â”‚ Paiement â”‚
â”‚Individuelâ”‚            â”‚ GroupÃ©   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   POST     â”‚
         â”‚  /bill     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Structure des fichiers par couche

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COUCHE PRÃ‰SENTATION                       â”‚
â”‚                        (Composants React)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ App.tsx                                                          â”‚
â”‚ â”œâ”€ MenuInterface.tsx (Tablette/Smartphone)                      â”‚
â”‚ â”œâ”€ MenuView.tsx (Liste des plats)                               â”‚
â”‚ â”œâ”€ DishCard.tsx (Carte individuelle)                            â”‚
â”‚ â”œâ”€ CartSidebar.tsx (Panier)                                     â”‚
â”‚ â””â”€ OrderConfirmation.tsx                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COUCHE SERVICE                           â”‚
â”‚                      (Logique mÃ©tier)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ dishService.ts â”€â”€â”€â”€â”€â–º Service unifiÃ© de chargement              â”‚
â”‚                       â””â”€â–º Switch MOCK/BACKEND                   â”‚
â”‚                                                                  â”‚
â”‚ backendAPI.ts â”€â”€â”€â”€â”€â”€â–º Communication avec microservices          â”‚
â”‚                       â”œâ”€â–º MenuServiceAPI                        â”‚
â”‚                       â”œâ”€â–º DiningServiceAPI                      â”‚
â”‚                       â””â”€â–º KitchenServiceAPI                     â”‚
â”‚                                                                  â”‚
â”‚ dishMapper.ts â”€â”€â”€â”€â”€â”€â”€â–º Transformation Backend â†” Frontend        â”‚
â”‚                       â”œâ”€â–º mapBackendItemToDish()                â”‚
â”‚                       â””â”€â–º prepareDishForBackend()               â”‚
â”‚                                                                  â”‚
â”‚ backendTestUtils.ts â”€â–º Utilitaires de test console             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COUCHE DONNÃ‰ES                           â”‚
â”‚                    (Sources de donnÃ©es)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ dishes.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º DonnÃ©es MOCK locales (20+ plats)         â”‚
â”‚                                                                  â”‚
â”‚ dishEnrichment.ts â”€â”€â”€â–º Base d'enrichissement locale             â”‚
â”‚                        (descriptions, ingrÃ©dients, allergÃ¨nes)  â”‚
â”‚                                                                  â”‚
â”‚ rushService.ts â”€â”€â”€â”€â”€â”€â–º Simulation mode Rush                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COUCHE CONFIGURATION                        â”‚
â”‚                      (ParamÃ©trage)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ backendConfig.ts â”€â”€â”€â”€â–º URLs des microservices                   â”‚
â”‚                        Mode MOCK/BACKEND                        â”‚
â”‚                                                                  â”‚
â”‚ .env â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Variables d'environnement                â”‚
â”‚                        VITE_USE_MOCK_DATA                       â”‚
â”‚                        VITE_*_SERVICE_URL                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          COUCHE TYPES                            â”‚
â”‚                      (DÃ©finitions TypeScript)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ backend.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Types pour les 3 microservices          â”‚
â”‚                        - Menu Service                            â”‚
â”‚                        - Dining Service                          â”‚
â”‚                        - Kitchen Service                         â”‚
â”‚                                                                  â”‚
â”‚ dishes.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Interface Dish                           â”‚
â”‚                        Interface CartItem                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Enrichissement de donnÃ©es en dÃ©tail

```
Backend (Menu Service)          dishEnrichment.ts          Frontend (Dish)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MenuItem           â”‚          â”‚ "burger-       â”‚         â”‚ Dish               â”‚
â”‚                    â”‚          â”‚  classique": {â”‚         â”‚                    â”‚
â”‚ _id: "abc123"      â”‚   â”Œâ”€â”€â”€â”€â”€â–ºâ”‚                â”‚    â”Œâ”€â”€â”€â”€â–ºâ”‚ id: "abc123"       â”‚
â”‚ fullName: "Burger" â”‚   â”‚      â”‚  description:  â”‚    â”‚    â”‚ name: "Burger..."  â”‚
â”‚ shortName: "burger-â”‚â”€â”€â”€â”˜      â”‚   "180g..."    â”‚â”€â”€â”€â”€â”˜    â”‚ description: "..." â”‚
â”‚  classique"        â”‚          â”‚  ingredients:  â”‚         â”‚ ingredients: [...]  â”‚
â”‚ price: 12.50       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ price: 12.50       â”‚
â”‚ category: "MAIN"   â”‚â”€â”€â”€â”€â”€â”    â”‚  ["BÅ“uf",...]  â”‚    â”Œâ”€â”€â”€â–ºâ”‚ category: "plat"   â”‚
â”‚ image: "https://..." â”‚   â”‚    â”‚  allergens:    â”‚    â”‚    â”‚ imageUrl: "..."    â”‚
â”‚                    â”‚   â”‚    â”‚  ["Gluten"...] â”‚    â”‚    â”‚ prepTime: 15       â”‚
â”‚                    â”‚   â”‚    â”‚  isSpicy: falseâ”‚    â”‚    â”‚ popularity: 3      â”‚
â”‚                    â”‚   â”‚    â”‚ }              â”‚    â”‚    â”‚ isVegetarian: falseâ”‚
â”‚                    â”‚   â”‚    â”‚                â”‚    â”‚    â”‚ isQuick: true      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                          â”‚
                          â””â”€â”€â–º dishMapper.ts â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               (Combine les deux)
```

## Tests dans la console

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONSOLE NAVIGATEUR (F12)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ backendTest.showStatus()
                                  â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Mode: MOCK (donnÃ©es locales)         â”‚
              â”‚  Services:                            â”‚
              â”‚    Menu: http://localhost:3001        â”‚
              â”‚    Dining: http://localhost:3002      â”‚
              â”‚    Kitchen: http://localhost:3004     â”‚
              â”‚                                       â”‚
              â”‚  Commandes:                           â”‚
              â”‚    - testBackendConnection()          â”‚
              â”‚    - testDishLoading()                â”‚
              â”‚    - testOrderFlow(tableNum)          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ await backendTest.testBackendConnection()
                                  â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ğŸ” Test de connexion...              â”‚
              â”‚  âœ… Menu Service: ok                  â”‚
              â”‚  âœ… Dining Service: ok                â”‚
              â”‚  âœ… Kitchen Service: ok               â”‚
              â”‚  ğŸ‰ Tous les services opÃ©rationnels ! â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ await backendTest.testDishLoading()
                                  â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ğŸ½ï¸ Test du chargement...             â”‚
              â”‚  ğŸ“¦ 25 items reÃ§us du backend         â”‚
              â”‚  âœ¨ 25 plats enrichis                 â”‚
              â”‚  âœ… Tous correctement enrichis !      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ await backendTest.testOrderFlow(1)
                                  â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ğŸ´ Test cycle de commande table 1... â”‚
              â”‚  1ï¸âƒ£ Table 1 - OccupÃ©e: false          â”‚
              â”‚  2ï¸âƒ£ Commande crÃ©Ã©e: xyz789            â”‚
              â”‚  3ï¸âƒ£ 25 plats disponibles              â”‚
              â”‚  4ï¸âƒ£ Plat ajoutÃ© - Total: 1 ligne      â”‚
              â”‚  5ï¸âƒ£ 1 prÃ©paration crÃ©Ã©e               â”‚
              â”‚  6ï¸âƒ£ Commande facturÃ©e                 â”‚
              â”‚  ğŸ‰ Cycle complet testÃ© avec succÃ¨s ! â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## LÃ©gende des symboles

```
â”Œâ”€â”€â”€â”€â”€â”
â”‚ BOX â”‚  = Composant / Fichier / Service
â””â”€â”€â”€â”€â”€â”˜

   â”‚     = Flux de donnÃ©es
   â–¼

â”€â”€â”€â–º    = Appel de fonction / API

â”Œâ”€â”€â”€â”
â”‚ ? â”‚   = DÃ©cision (if/else)
â””â”€â”€â”€â”˜

[...]   = Liste / Array

{...}   = Objet / Object
```

---

**ğŸ“Š Cette architecture garantit:**
- âœ… RÃ©utilisation maximale du code existant
- âœ… SÃ©paration des responsabilitÃ©s (SoC)
- âœ… FacilitÃ© de test (mode MOCK)
- âœ… Ã‰volutivitÃ© (ajout de services)
- âœ… Type safety (TypeScript partout)
- âœ… RÃ©silience (fallback automatique)
